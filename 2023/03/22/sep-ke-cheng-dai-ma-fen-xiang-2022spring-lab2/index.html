<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="SEP课程代码分享（2022SPRING)-lab2, Giggle&#39;s blog">
    <meta name="description" content="Welcome to my blog!">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>SEP课程代码分享（2022SPRING)-lab2 | Giggle&#39;s blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.2"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Giggle&#39;s blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Giggle&#39;s blog</div>
        <div class="logo-desc">
            
            Welcome to my blog!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/14.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">SEP课程代码分享（2022SPRING)-lab2</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-03-22
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-03-22
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    4.2k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    21 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <hr>
<p>首先，奉上lab的具体要求：</p>
<h1 id="Lab2-MiniEd"><a href="#Lab2-MiniEd" class="headerlink" title="Lab2: MiniEd"></a>Lab2: MiniEd</h1><p>Ed是一个非常古老的行文本编辑器，曾经被用于文本文件的创建、显示、更改和其他一些操作。</p>
<p>Ed有两种模式，刚运行时Ed处于命令模式（command mode）。此时输入到Ed的文本会被当做命令进行处理。通过一些特殊命令，Ed可以被切换到输入模式（input mode），在输入模式下输入的文本会被当做文件内容进行保存。</p>
<p>本次Lab的任务是使用C++通过面向对象的方法完成一个简化版的Ed编辑器MiniEd。在MiniEd中，仅需实现Ed命令的一个子集。</p>
<h4 id="命令与符号解释"><a href="#命令与符号解释" class="headerlink" title="命令与符号解释"></a>命令与符号解释</h4><p>在以下列出的Ed命令中，每个<code>?</code>为一个数字n，表示第n行。其值应该在第一行到最后一行之间（包含第一行和最后一行）。</p>
<p>每个<code>?,?</code>表示一个区间，其中<code>?</code>的含义同上。如<code>1,2</code>表示第一行到第二行；<code>5,11</code>表示第五行到第十一行；<code>6,6</code>表示第六行。应保证区间起点不大于终点。</p>
<p>每个命令为一行输入，以下为需要实现的命令说明。</p>
<blockquote>
<ul>
<li><p><code>a</code></p>
<p>Appends text to the buffer after the current address line. If the current address is zero, the entered text is placed at the beginning of the buffer. Text is entered in input mode. The current address is set to the address of the last line entered or, if there were none, the current address is not changed.  </p>
<p>在当前地址行后将文本追加到缓冲区。如果当前地址为零，输入的文本被放置在缓冲区的开头。文本在输入模式下输入。当前地址被设置为输入的最后一行的地址，当前地址不变。</p>
</li>
<li><p><code>?,?d</code></p>
<p>Deletes the addressed lines from the buffer. The current address is set to the new address of the line after the last line deleted; if the lines deleted were originally at the end of the buffer, the current address is set to the address of the new last line; if no lines remain in the buffer, the current address is set to zero.  </p>
<p>从缓冲区中删除寻址行。当前地址被设置为删除最后一行之后的行的新地址；如果删除的行最初位于缓冲区的末尾，则将当前地址设置为新的最后一行的地址；如果缓冲区中没有剩余行，则当前地址设置为零。</p>
</li>
<li><p><code>i</code></p>
<p>Inserts text in the buffer before the current addressed line. If the current address is zero, the entered text is placed at the beginning of the buffer. Text is entered in input mode. The current address is set to the address of the last line entered or, if there were none, the current address is not changed. </p>
<p>在缓冲区中当前地址行之前插入文本。如果当前地址为零，则输入的文本将放在缓冲区的开头。文本在输入模式下输入。当前地址设置为最后一行输入的地址，如果没有，则当前地址不变。 </p>
</li>
<li><p><code>?,?n</code></p>
<p>Number command. Prints the addressed lines, preceding each line by its line number and a \<tab> (<code>&#39;\t&#39;</code>). The current address is set to the address of the last line printed. Specially, <code>1,$n</code> prints all lines in the buffer.</p>
<p>数字命令。打印已寻址的行，在每行前面按行号和<tab>（“\t”）。当前地址设置为打印的最后一行的地址。特别是，1$n打印缓冲区中的所有行。</p>
</li>
<li><p><code>Q</code></p>
<p>Quits ed unconditionally. Unwritten changes are discarded.</p>
<p>无条件退出。放弃未写入的更改 </p>
</li>
<li><p><code>w file</code></p>
<p>Writes all lines to file and prints the number of bytes written to the file. Print an error if no filename is specified. The current address is unchanged.</p>
<p>将所有行写入文件并打印写入文件的字节数。如果未指定文件名，则打印错误。当前地址不变。</p>
</li>
<li><p><code>?</code></p>
<p>Null command. An address alone prints the addressed line. The current address is set to the address of the printed line.</p>
<p>空命令。地址单独打印地址行。当前地址设置为打印行的地址。</p>
</li>
</ul>
</blockquote>
<p>对于无效指令或错误指令，请输出一个以问号开头的错误提示信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? Bad/Unknown command</span><br></pre></td></tr></table></figure>
<h4 id="程序大体逻辑"><a href="#程序大体逻辑" class="headerlink" title="程序大体逻辑"></a>程序大体逻辑</h4><p>MiniEd的部分代码已经给出，共五个文件：<code>Buffer.cc</code>、<code>Buffer.h</code>、<code>Editor.cc</code>、<code>Editor.h</code>和<code>ed.cc</code>。其中<code>Buffer.cc/h</code>、<code>Editor.cc/h</code>分别声明和实现了两个类。<code>ed.cc</code>中包含了<code>main</code>函数，并在其中建造并运行了一个<code>Editor</code>实例。在<code>Editor::run</code>中，程序会不断读入命令，对命令进行解析并调用相应的函数（<code>Editor::cmdXXX</code>）。<code>Buffer</code>类用于保存所有输入的文本，其中每行文本保存在一个<code>string</code>类型的字符串中，所有的行保存在一个链表中。<code>Buffer</code>类有各种用于操作和展示文本的函数，供<code>Editor</code>调用。</p>
<p><img src="http://www.plantuml.com/plantuml/png/ZL5BIWGn4Dtd55bsDds0Tk7uKH1aG134PPnKsuNvX5J5lhx5J1o4Y7OsATxdvL7P4Tl2DNYbZfDIKx0O1tCXqvr3JcMQIZq1wu8UzF1KaI-DHjB3FXcbzLdeaBBbmt8Jd1Y4cLFvaEk7v13SLSuGcq2OwphF88njy3YEtrPjtwLC5_0G2GgV0_utt887Xkv5TuGVCG89ztV4leOtA5q4BMdT5l1Iy9SAgw3mdExHmuOAtdS18NsANoeqlwpmj7KPsd-z0XabXpXbjHEy1ly5" alt=""></p>
<h4 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h4><p><strong>代码</strong>：</p>
<ol>
<li>实现一个<strong>链表</strong>，并作为<code>Buffer</code>的成员，用于保存所有行。</li>
<li>实现<code>Buffer::writeToFile</code>，将当前所有的文本保存到指定文件中，并打印所保存的字节数。</li>
<li>实现<code>Buffer::showLines</code>，将相应的文本行以规定格式打印出来。</li>
<li>实现<code>Buffer::insertLine</code>，将指定文本插入到当前行之前。</li>
<li>实现<code>Editor::cmdAppend</code>，完成对<code>a</code>命令的处理。</li>
<li>在<code>Editor::dispatchCmd</code>中，完成对<code>cmdWrite</code>的调用。</li>
<li>在<code>Editor::dispatchCmd</code>中，完成对<code>1,$n</code>情况的判断，以及后续的处理。</li>
<li>完成<code>Editor</code>的析构函数。</li>
<li>添加对各种异常情况的处理。异常情况如指定了错误的行号区间、指定了超出范围的行号等。</li>
</ol>
<p><strong>链表请自主实现，不可使用任何第三方库的实现。</strong></p>
<p>除ed.cc外，可以随意更改代码，实现了要求的功能即可。</p>
<p><strong>回答问题</strong>：</p>
<ol>
<li>请解释在<code>Editor::dispatchCmd</code>中下述代码的逻辑，尤其注意对stringstream的使用。</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> start, end;</span><br><span class="line"><span class="type">char</span> comma, type = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="function">stringstream <span class="title">ss</span><span class="params">(cmd)</span></span>;</span><br><span class="line">ss &gt;&gt; start;</span><br><span class="line"><span class="keyword">if</span> (ss.<span class="built_in">eof</span>()) &#123;</span><br><span class="line">    <span class="built_in">cmdNull</span>(start);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">ss &gt;&gt; comma &gt;&gt; end &gt;&gt; type;</span><br><span class="line"><span class="keyword">if</span> (ss.<span class="built_in">good</span>()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">cmdNumber</span>(start, end);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="string">&#x27;d&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">cmdDelete</span>(start, end);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用样例"><a href="#使用样例" class="headerlink" title="使用样例"></a>使用样例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">cmd&gt; a  </span><br><span class="line">It&#x27;s input mode now. Quit with a line with a single dot(.)</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">.</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1       #include &lt;iostream&gt;</span><br><span class="line">2</span><br><span class="line">3       int main()</span><br><span class="line">4       &#123;</span><br><span class="line">5       &#125;</span><br><span class="line">cmd&gt; 3</span><br><span class="line">int main()</span><br><span class="line">cmd&gt; i</span><br><span class="line">It&#x27;s input mode now. Quit with a line with a single dot(.)</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#includ</span><br><span class="line">.</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1       #include &lt;iostream&gt;</span><br><span class="line">2</span><br><span class="line">3       using namespace std;</span><br><span class="line">4</span><br><span class="line">5       #includ</span><br><span class="line">6       int main()</span><br><span class="line">7       &#123;</span><br><span class="line">8       &#125;</span><br><span class="line">cmd&gt; 4,5d</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1       #include &lt;iostream&gt;</span><br><span class="line">2</span><br><span class="line">3       using namespace std;</span><br><span class="line">4       int main()</span><br><span class="line">5       &#123;</span><br><span class="line">6       &#125;</span><br><span class="line">cmd&gt; 1,3c</span><br><span class="line">? Bad/Unknown command</span><br><span class="line">cmd&gt; 1,5n</span><br><span class="line">1       #include &lt;iostream&gt;</span><br><span class="line">2</span><br><span class="line">3       using namespace std;</span><br><span class="line">4       int main()</span><br><span class="line">5       &#123;</span><br><span class="line">cmd&gt; a</span><br><span class="line">It&#x27;s input mode now. Quit with a line with a single dot(.)</span><br><span class="line">    cout &lt;&lt; &quot;Hello my editor&quot; &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">.</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1       #include &lt;iostream&gt;</span><br><span class="line">2</span><br><span class="line">3       using namespace std;</span><br><span class="line">4       int main()</span><br><span class="line">5       &#123;</span><br><span class="line">6           cout &lt;&lt; &quot;Hello my editor&quot; &lt;&lt; endl;</span><br><span class="line">7           </span><br><span class="line">8           return 0;</span><br><span class="line">9       &#125;</span><br><span class="line">cmd&gt; write</span><br><span class="line">? Bad/Unknown command</span><br><span class="line">cmd&gt; 1,999n</span><br><span class="line">? Line number out of range</span><br><span class="line">cmd&gt; 9,1n</span><br><span class="line">? Number range error</span><br><span class="line">cmd&gt; 4,2d</span><br><span class="line">? Delete range error</span><br><span class="line">cmd&gt; 2019</span><br><span class="line">? Line number out of range</span><br><span class="line">cmd&gt; w hello.cc</span><br><span class="line">114 byte(s) written</span><br><span class="line">cmd&gt; Q</span><br></pre></td></tr></table></figure>
<h4 id="输出格式规范"><a href="#输出格式规范" class="headerlink" title="输出格式规范"></a>输出格式规范</h4><ul>
<li><p>你的程序应该从标准输入<code>stdin</code>中获取输入，输出到标准输出<code>stdout</code></p>
</li>
<li><p>输出行时，行号和内容之间用一个制表符（\t）隔开</p>
</li>
<li><p>Write指令成功后输出写入的字节数：<code>%d byte(s) written</code></p>
<ul>
<li>统计输出字节数需要统计可见的字符和所有不可见的字符（包括所有空格和每行末尾的换行符），按照ASCII编码每个字符占一字节。一般来说，使用流输出或者C语言的输出函数时，可以通过相关函数或者输出函数返回值得知成功输出的字节数。自己计算字符串长度统计也可以。</li>
</ul>
</li>
<li><p>错误处理：</p>
<ul>
<li>指令错误：<code>？ Bad/Unknown command</code></li>
<li>行号越界：<code>？ Line number out of range</code></li>
<li>Number指令中范围错误：<code>? Number range error</code></li>
<li>Delete指令中范围错误：<code>? Delete range error</code></li>
<li>Write指令中未指定文件名：<code>? Filename not specified</code></li>
</ul>
<p>补充说明：</p>
<p>非数字的范围判定为指令错误。例：<code>1,xn</code>判定为指令错误，而非范围错误</p>
<p>范围错误优先于行号越界。例：<code>999,1n</code>判定为范围错误，而非行号越界</p>
</li>
<li><p>提示性的输出不作规定。例如样例中的<code>cmd&gt;</code>以及<code>It&#39;s input mode now. Quit with a line with a single dot(.)</code></p>
</li>
</ul>
<h4 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h4><p>提交时，请将</p>
<ul>
<li>你完成的MiniEd源代码和你对上述问题的回答<code>lab2-XXX.pdf</code>放在同一个文件夹下，该文件夹名应为<code>lab2</code></li>
<li>将<code>lab2</code>文件夹压缩成7z压缩包，并重命名为<code>lab2-XXX.7z</code></li>
</ul>
<p>上传到 canvas 中。</p>
<p>文件结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">lab2-XXX.7z</span><br><span class="line">└── lab2</span><br><span class="line">    ├── Buffer.cc</span><br><span class="line">    ├── Buffer.h</span><br><span class="line">    ├── CMakeLists.txt</span><br><span class="line">    ├── ed.cc</span><br><span class="line">    ├── Editor.cc</span><br><span class="line">    ├── Editor.h</span><br><span class="line">    ├── lab2-XXX.pdf</span><br><span class="line">    └── spec</span><br><span class="line">        ├── lab2.md</span><br><span class="line">        └── lab2.pdf</span><br></pre></td></tr></table></figure>
<p>（其中XXX为学号，如<code>lab2-518037910001.7z</code>和<code>lab2-518037910001.pdf</code>）</p>
<p>如果需要更改，请在文件名后加版本号，最终以最高版本号为准。如第二次提交可用<code>lab2-518037910001-2.7z</code>。</p>
<p>其余要求同 lab1。</p>
<p><strong>注1：</strong>未按照格式提交可能会引起评测错误，导致零分</p>
<p><strong>注2：</strong>建议将代码写入提供的框架代码文件中。将代码写入新建的源代码文件可能会导致评测时编译失败</p>
<p><strong>注3：</strong>本次实验可以多次提交，每30分钟将会进行一次自动评测</p>
<hr>
<p>要求结束</p>
<p>奉上代码（自己写的，可能不够完美）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Buffer.cc</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Buffer.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//<span class="doctag">TODO:</span> your code here</span></span><br><span class="line"><span class="comment">//first we can implement the functions in list;</span></span><br><span class="line">edlist::<span class="built_in">edlist</span>()</span><br><span class="line">&#123;</span><br><span class="line">    head=<span class="keyword">new</span> node;</span><br><span class="line">    currentLength=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">edlist::clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    node*p=head-&gt;next,*q;</span><br><span class="line">    head-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        q=p-&gt;next;</span><br><span class="line">        <span class="keyword">delete</span> p;</span><br><span class="line">        p=q;</span><br><span class="line">    &#125;</span><br><span class="line">    currentLength=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">edlist::node *<span class="title">edlist::move</span><span class="params">(<span class="type">int</span> i)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">    node*p=head;</span><br><span class="line">    <span class="keyword">while</span>(i--&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">edlist::insert</span><span class="params">(<span class="type">int</span> i, <span class="type">const</span> std::string &amp;x)</span> </span>&#123;</span><br><span class="line">    node* pos;</span><br><span class="line">    pos=<span class="built_in">move</span>(i<span class="number">-1</span>);</span><br><span class="line">    pos-&gt;next=<span class="keyword">new</span> <span class="built_in">node</span>(x,pos-&gt;next);</span><br><span class="line">    ++currentLength;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">edlist::remove</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    node *pos,*delp;</span><br><span class="line">    pos=<span class="built_in">move</span>(i<span class="number">-1</span>);</span><br><span class="line">    delp=pos-&gt;next;</span><br><span class="line">    pos-&gt;next=delp-&gt;next;</span><br><span class="line">    <span class="keyword">delete</span> delp;</span><br><span class="line">    --currentLength;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">edlist::search</span><span class="params">(<span class="type">const</span> std::string &amp;x)</span> </span>&#123;</span><br><span class="line">    node*p=head-&gt;next;</span><br><span class="line">    <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span>&amp;&amp;p-&gt;data!=x)</span><br><span class="line">    &#123;</span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">edlist::traverse</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">    node*p=head-&gt;next;</span><br><span class="line">    <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        i++;</span><br><span class="line">        std::cout&lt;&lt;i&lt;&lt;<span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">        std::cout&lt;&lt;p-&gt;data&lt;&lt;std::endl;</span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">edlist::length</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> currentLength;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">edlist::visit</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    node* tmp= <span class="built_in">move</span>(i);</span><br><span class="line">    std::cout&lt;&lt;tmp-&gt;data;</span><br><span class="line">    std::cout&lt;&lt;std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//implement the functions in ListBuffer</span></span><br><span class="line">Buffer::<span class="built_in">Buffer</span>() &#123;</span><br><span class="line">    list=<span class="keyword">new</span> edlist;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Buffer::~<span class="built_in">Buffer</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buffer::writeToFile</span><span class="params">(<span class="type">const</span> string &amp;filename)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> allByte=<span class="number">0</span>;</span><br><span class="line">    <span class="function">std::ofstream <span class="title">afile</span><span class="params">(filename)</span></span>;</span><br><span class="line">    edlist::node *p=list-&gt;head-&gt;next;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        allByte+=p-&gt;data.<span class="built_in">size</span>();</span><br><span class="line">        afile&lt;&lt;p-&gt;data;</span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">        allByte++;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout&lt;&lt;allByte&lt;&lt;<span class="string">&quot; byte(s) written&quot;</span>&lt;&lt;std::endl;</span><br><span class="line">    afile.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buffer::showLines</span><span class="params">(<span class="type">int</span> from, <span class="type">int</span> to)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=from;i&lt;=to;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        edlist::node* tmp=list-&gt;<span class="built_in">move</span>(i);</span><br><span class="line">        std::cout&lt;&lt;i&lt;&lt;<span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">        std::cout&lt;&lt;tmp-&gt;data&lt;&lt;std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buffer::deleteLines</span><span class="params">(<span class="type">int</span> from, <span class="type">int</span> to)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=to-from;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        list-&gt;<span class="built_in">remove</span>(from);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buffer::insertLine</span><span class="params">(<span class="type">const</span> string &amp;text,<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    list-&gt;<span class="built_in">insert</span>(a,text);</span><br><span class="line">    currentLineNum=a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buffer::appendLine</span><span class="params">(<span class="type">const</span> string &amp;text)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">insertLine</span>(text,currentLineNum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">const</span> string &amp;<span class="title">Buffer::moveToLine</span><span class="params">(<span class="type">int</span> idx)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edlist::node* tmp=list-&gt;<span class="built_in">move</span>(idx);</span><br><span class="line">    <span class="keyword">return</span> tmp-&gt;data;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Buffer.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::string;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">edlist</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">length</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> i,<span class="type">const</span> string &amp;x)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> i)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(<span class="type">const</span> string &amp;x)</span></span>;</span><br><span class="line">    <span class="function">string <span class="title">visit</span><span class="params">(<span class="type">int</span> i)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">traverse</span><span class="params">()</span><span class="type">const</span></span>;</span><br><span class="line">    <span class="built_in">edlist</span>();</span><br><span class="line">    ~<span class="built_in">edlist</span>()&#123;&#125;;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">    &#123;</span><br><span class="line">        string data;</span><br><span class="line">        node* next;</span><br><span class="line">        <span class="built_in">node</span>(<span class="type">const</span> string &amp;x,node* n=<span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            data=x;next=n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">node</span>():<span class="built_in">next</span>(<span class="literal">NULL</span>)&#123;&#125;</span><br><span class="line">        ~<span class="built_in">node</span>()&#123;&#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    node* head;</span><br><span class="line">    <span class="type">int</span> currentLength;</span><br><span class="line">    <span class="function">node* <span class="title">move</span><span class="params">(<span class="type">int</span> i)</span><span class="type">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Buffer</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> currentLineNum;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> add a List here for storing the input lines</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Buffer</span>();</span><br><span class="line">    ~<span class="built_in">Buffer</span>();</span><br><span class="line">    edlist* list;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">writeToFile</span><span class="params">(<span class="type">const</span> string &amp;filename)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">const</span> string &amp;<span class="title">moveToLine</span><span class="params">(<span class="type">int</span> idx)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showLines</span><span class="params">(<span class="type">int</span> from, <span class="type">int</span> to)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">deleteLines</span><span class="params">(<span class="type">int</span> from, <span class="type">int</span> to)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insertLine</span><span class="params">(<span class="type">const</span> string &amp;text,<span class="type">int</span> a)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">appendLine</span><span class="params">(<span class="type">const</span> string &amp;text)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ed.cc</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Editor.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Editor ed;</span><br><span class="line">    ed.<span class="built_in">run</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Editor.cc</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Editor.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">Editor::<span class="built_in">Editor</span>()</span><br><span class="line">&#123;</span><br><span class="line">    buffer = <span class="keyword">new</span> <span class="built_in">Buffer</span>();</span><br><span class="line">&#125;</span><br><span class="line">Editor::~<span class="built_in">Editor</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Implement destructor</span></span><br><span class="line">    <span class="keyword">delete</span> buffer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::run</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string cmd;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;cmd&gt; &quot;</span>;</span><br><span class="line">        cout.<span class="built_in">flush</span>();</span><br><span class="line">        <span class="built_in">getline</span>(cin, cmd);</span><br><span class="line">        <span class="keyword">if</span> (cmd == <span class="string">&quot;Q&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="built_in">dispatchCmd</span>(cmd);</span><br><span class="line">        &#125; <span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span> *e) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;? &quot;</span> &lt;&lt; e &lt;&lt; endl;</span><br><span class="line">        &#125; <span class="built_in">catch</span> (<span class="type">const</span> out_of_range &amp;oor) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;? &quot;</span> &lt;&lt; oor.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">        &#125; <span class="built_in">catch</span> (<span class="type">const</span> range_error &amp;re) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;? &quot;</span> &lt;&lt; re.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::cmdAppend</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//it&#x27;s function:</span></span><br><span class="line">    <span class="comment">//Appends text to the buffer after the current address line. If the current address is zero,</span></span><br><span class="line">    <span class="comment">//the entered text is placed at the beginning of the buffer. Text is entered in input mode.</span></span><br><span class="line">    <span class="comment">//The current address is set to the address of the last line entered or, if there were none,</span></span><br><span class="line">    <span class="comment">//the current address is not changed.</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;It&#x27;s input mode now. Quit with a line with a single dot(.)&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> finish cmdAppend.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        string text;</span><br><span class="line">        <span class="built_in">getline</span>(cin,text);</span><br><span class="line">        <span class="keyword">if</span>(text==<span class="string">&quot;.&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span> (currentLine==<span class="number">0</span>) &#123;</span><br><span class="line">            buffer-&gt;<span class="built_in">insertLine</span>(text,currentLine+<span class="number">1</span>);</span><br><span class="line">            currentLine++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            buffer-&gt;<span class="built_in">insertLine</span>(text,currentLine+<span class="number">1</span>);</span><br><span class="line">            currentLine++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::cmdInsert</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;It&#x27;s input mode now. Quit with a line with a single dot(.)&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="type">bool</span> firstLine = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        string text;</span><br><span class="line">        <span class="built_in">getline</span>(cin, text);</span><br><span class="line">        <span class="keyword">if</span> (text == <span class="string">&quot;.&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">/*if (firstLine) &#123;</span></span><br><span class="line"><span class="comment">            buffer-&gt;insertLine(text,currentLine);</span></span><br><span class="line"><span class="comment">            firstLine = false;</span></span><br><span class="line"><span class="comment">        &#125;  else &#123;</span></span><br><span class="line"><span class="comment">            buffer-&gt;insertLine(text,currentLine+1);</span></span><br><span class="line"><span class="comment">            currentLine++;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="keyword">if</span>(currentLine==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            firstLine= <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            buffer-&gt;<span class="built_in">insertLine</span>(text,currentLine+<span class="number">1</span>);</span><br><span class="line">            currentLine++;</span><br><span class="line">            currentLine++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            firstLine= <span class="literal">false</span>;</span><br><span class="line">            buffer-&gt;<span class="built_in">insertLine</span>(text,currentLine);</span><br><span class="line">            currentLine++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(firstLine== <span class="literal">false</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        currentLine--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::cmdDelete</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(end&lt;start)</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;Delete range error&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span>(start&lt;=<span class="number">0</span>||end&gt;buffer-&gt;list-&gt;currentLength)</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;Line number out of range&quot;</span>;</span><br><span class="line">    <span class="type">bool</span>  flag= <span class="literal">true</span>;</span><br><span class="line">    <span class="type">bool</span> anot= <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(end==buffer-&gt;list-&gt;currentLength)</span><br><span class="line">        flag=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    buffer-&gt;<span class="built_in">deleteLines</span>(start, end);</span><br><span class="line">    <span class="keyword">if</span>(flag== <span class="literal">false</span>)</span><br><span class="line">        currentLine=start<span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            currentLine=start;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//cout&lt;&lt;currentLine&lt;&lt;endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::cmdNull</span><span class="params">(<span class="type">int</span> line)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(line&lt;=<span class="number">0</span>||line&gt;buffer-&gt;list-&gt;currentLength)</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;Line number out of range&quot;</span>;</span><br><span class="line">    cout &lt;&lt; buffer-&gt;<span class="built_in">moveToLine</span>(line) &lt;&lt; endl;</span><br><span class="line">    currentLine=line;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::cmdNumber</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(end&lt;start)</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;Number range error&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span>(start&lt;=<span class="number">0</span>||end&gt;buffer-&gt;list-&gt;currentLength)</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;Line number out of range&quot;</span>;</span><br><span class="line">    buffer-&gt;<span class="built_in">showLines</span>(start, end);</span><br><span class="line">    currentLine=end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::cmdWrite</span><span class="params">(<span class="type">const</span> string &amp;filename)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    buffer-&gt;<span class="built_in">writeToFile</span>(filename);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::dispatchCmd</span><span class="params">(<span class="type">const</span> string &amp;cmd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*if(cmd==&quot;r&quot;)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        cout&lt;&lt;returnCurrentLine()&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">        return;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    <span class="keyword">if</span> (cmd == <span class="string">&quot;a&quot;</span>) &#123;</span><br><span class="line">        <span class="built_in">cmdAppend</span>();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">&#x27;w&#x27;</span> &amp;&amp; cmd[<span class="number">1</span>] == <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> call cmdWrite with proper arguments</span></span><br><span class="line">        string a;</span><br><span class="line">        a=cmd.<span class="built_in">substr</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(a==<span class="string">&quot;&quot;</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="string">&quot;Filename not specified&quot;</span>;</span><br><span class="line">        <span class="built_in">cmdWrite</span>(a);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> handle special case &quot;1,$n&quot;.</span></span><br><span class="line">    <span class="keyword">if</span>(cmd==<span class="string">&quot;1,$n&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(buffer-&gt;list-&gt;currentLength==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="string">&quot;Number range error&quot;</span>;</span><br><span class="line">        <span class="built_in">cmdAll</span>();</span><br><span class="line">        currentLine=buffer-&gt;list-&gt;currentLength;</span><br><span class="line">        <span class="comment">//cout&lt;&lt;currentLine&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> start, end;</span><br><span class="line">    <span class="type">char</span> comma, type = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="function">stringstream <span class="title">ss</span><span class="params">(cmd)</span></span>;</span><br><span class="line">    ss &gt;&gt; start;</span><br><span class="line">    <span class="keyword">if</span> (ss.<span class="built_in">eof</span>()) &#123;</span><br><span class="line">        <span class="built_in">cmdNull</span>(start);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ss &gt;&gt; comma &gt;&gt; end &gt;&gt; type;</span><br><span class="line">    <span class="keyword">if</span> (ss.<span class="built_in">good</span>()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">cmdNumber</span>(start, end);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="string">&#x27;d&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">cmdDelete</span>(start, end);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cmd == <span class="string">&quot;i&quot;</span>) &#123;</span><br><span class="line">        <span class="built_in">cmdInsert</span>();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;Bad/Unknown command&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Editor::cmdAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    buffer-&gt;list-&gt;<span class="built_in">traverse</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Editor.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Buffer.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Editor</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  Buffer *buffer;</span><br><span class="line">  <span class="type">int</span> currentLine=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">dispatchCmd</span><span class="params">(<span class="type">const</span> string &amp;cmd)</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">cmdAppend</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">cmdInsert</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">cmdDelete</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">cmdNumber</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">cmdWrite</span><span class="params">(<span class="type">const</span> string &amp;filename)</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">cmdNull</span><span class="params">(<span class="type">int</span> line)</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">cmdAll</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">returnCurrentLine</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> currentLine;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Editor</span>();</span><br><span class="line">  ~<span class="built_in">Editor</span>();</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<p>下面是样例以及自己写的一些解题结构</p>
<p>样例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">cmd&gt; a  </span><br><span class="line">It&#x27;s input mode now. Quit with a line with a single dot(.)</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">.</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1	#include &lt;iostream&gt;</span><br><span class="line">2	</span><br><span class="line">3	int main()</span><br><span class="line">4	&#123;</span><br><span class="line">5	&#125;</span><br><span class="line">cmd&gt; 3</span><br><span class="line">int main()</span><br><span class="line">cmd&gt; i</span><br><span class="line">It&#x27;s input mode now. Quit with a line with a single dot(.)</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#includ</span><br><span class="line">.</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1	#include &lt;iostream&gt;</span><br><span class="line">2	</span><br><span class="line">3	using namespace std;</span><br><span class="line">4	</span><br><span class="line">5	#includ</span><br><span class="line">6	int main()</span><br><span class="line">7	&#123;</span><br><span class="line">8	&#125;</span><br><span class="line">cmd&gt; 4,5d</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1	#include &lt;iostream&gt;</span><br><span class="line">2	</span><br><span class="line">3	using namespace std;</span><br><span class="line">4	int main()</span><br><span class="line">5	&#123;</span><br><span class="line">6	&#125;</span><br><span class="line">cmd&gt; 1,3c</span><br><span class="line">? Bad/Unknown command</span><br><span class="line">cmd&gt; 1,5n</span><br><span class="line">1	#include &lt;iostream&gt;</span><br><span class="line">2	</span><br><span class="line">3	using namespace std;</span><br><span class="line">4	int main()</span><br><span class="line">5	&#123;</span><br><span class="line">cmd&gt; a</span><br><span class="line">It&#x27;s input mode now. Quit with a line with a single dot(.)</span><br><span class="line">    cout &lt;&lt; &quot;Hello my editor&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">.</span><br><span class="line">cmd&gt; 1,$n</span><br><span class="line">1	#include &lt;iostream&gt;</span><br><span class="line">2	</span><br><span class="line">3	using namespace std;</span><br><span class="line">4	int main()</span><br><span class="line">5	&#123;</span><br><span class="line">6	    cout &lt;&lt; &quot;Hello my editor&quot; &lt;&lt; endl;</span><br><span class="line">7	</span><br><span class="line">8	    return 0;</span><br><span class="line">9	&#125;</span><br><span class="line">cmd&gt; write</span><br><span class="line">? Bad/Unknown command</span><br><span class="line">cmd&gt; 1,999n</span><br><span class="line">? Line number out of range</span><br><span class="line">cmd&gt; 9,1n</span><br><span class="line">? Number range error</span><br><span class="line">cmd&gt; 4,2d</span><br><span class="line">? Delete range error</span><br><span class="line">cmd&gt; 2019</span><br><span class="line">? Line number out of range</span><br><span class="line">cmd&gt; w hello.cc</span><br><span class="line">111 byte(s) written</span><br><span class="line">cmd&gt; Q</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">class Editor &#123;</span><br><span class="line">private:</span><br><span class="line">  Buffer *buffer;</span><br><span class="line">  int currentLine=0;</span><br><span class="line"></span><br><span class="line">  void dispatchCmd(const string &amp;cmd);</span><br><span class="line">  void cmdAppend();</span><br><span class="line">  void cmdInsert();</span><br><span class="line">  void </span><br><span class="line">  cmdDelete(int start, int end);</span><br><span class="line">  void cmdNumber(int start, int end);</span><br><span class="line">  void cmdWrite(const string &amp;filename);</span><br><span class="line">  void cmdNull(int line);</span><br><span class="line">  void cmdAll();</span><br><span class="line">public:</span><br><span class="line">  Editor();</span><br><span class="line">  ~Editor();</span><br><span class="line">  void run();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Buffer &#123;</span><br><span class="line">private:</span><br><span class="line">    int currentLineNum;</span><br><span class="line">public:</span><br><span class="line">    Buffer();</span><br><span class="line">    ~Buffer();</span><br><span class="line">    edlist* list;</span><br><span class="line"></span><br><span class="line">    void writeToFile(const string &amp;filename) const;</span><br><span class="line"></span><br><span class="line">    const string &amp;moveToLine(int idx) const;</span><br><span class="line"></span><br><span class="line">    void showLines(int from, int to) const;</span><br><span class="line"></span><br><span class="line">    void deleteLines(int from, int to);//删除从from行到to行</span><br><span class="line">    void insertLine(const string &amp;text,int a);//在第a行之前插入text（即插入后的内容为第a行）</span><br><span class="line">    void appendLine(const string &amp;text,int a);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class edlist</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void clear();</span><br><span class="line"></span><br><span class="line">    int length() const;</span><br><span class="line">    void insert(int i,const string &amp;x);//在第i行之前插入x（即插入后的内容为第i行）</span><br><span class="line">    void remove(int i);//删除第i行</span><br><span class="line">    int search(const string &amp;x);</span><br><span class="line">    string visit(int i);</span><br><span class="line">    void traverse()const;</span><br><span class="line">    edlist();</span><br><span class="line">    ~edlist()&#123;&#125;;</span><br><span class="line">    node* head;</span><br><span class="line">    int currentLength;</span><br><span class="line">    node* move(int i)const;//转移到第i-1行</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<p>本次分享到这啦，如果你有更好的解题方法，欢迎与作者交流。</p>
<p>作者vx:w2386181363</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Wang Yixiao</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://GiggleWang.github.io/2023/03/22/sep-ke-cheng-dai-ma-fen-xiang-2022spring-lab2/">http://GiggleWang.github.io/2023/03/22/sep-ke-cheng-dai-ma-fen-xiang-2022spring-lab2/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Wang Yixiao</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/WeChatpay.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/06/19/qt-bi-ji/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/21.jpg" class="responsive-img" alt="QT学习笔记 2023Summer">
                        
                        <span class="card-title">QT学习笔记 2023Summer</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-06-19
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Wang Yixiao
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/03/08/kuang-ren-ri-ji-xin-bian/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/9.jpg" class="responsive-img" alt="狂人日记新编">
                        
                        <span class="card-title">狂人日记新编</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-03-08
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Wang Yixiao
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2024</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">Wang Yixiao</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">31.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:2386181363@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2386181363" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2386181363" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
